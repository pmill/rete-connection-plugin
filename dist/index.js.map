{"version":3,"sources":["webpack:///webpack/bootstrap b51774b8d23c28d8fc44","webpack:///./src/connection-renderer.js","webpack:///./src/picker.js","webpack:///./src/plugin.js","webpack:///./src/index.js","webpack:///./node_modules/svg-path-generator/index.js","webpack:///./node_modules/svg-path-generator/lib/svg-path-generator.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","el","_ref","x1","y1","x2","y2","connection","widthDifference","path","svg_path_generator_default","moveTo","relative","horizontalLineTo","verticalLineTo","end","classes","getClasses","innerHTML","join","str","toLowerCase","replace","toTrainCase","input","output","socket","Picker","editor","picker__classCallCheck","this","document","createElement","_output","x","y","_node$getSocketPositi","view","nodes","node","getSocketPosition","_node$getSocketPositi2","_slicedToArray","connection_renderer","render","val","area","appendChild","parentElement","removeChild","Plugin","plugin__classCallCheck","mousePosition","picker","src_picker","_this","multipleConnections","hasConnection","removeConnection","connections","connectedTo","find","connect","renderConnection","e","prevent","stopPropagation","preventDefault","pickInput","pickOutput","plugin","src_plugin","on","addEventListener","mouseHandle","arg","SvgPathGenerator","currentPath","isRelative","toString","_appendData","arguments","close","closePath","lineTo","curveTo","smoothCurveTo","bezierCurveTo","smoothBezierCurveTo","ellipticalArc","trim","symbol","args","Array","slice"],"mappings":"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","file":"/dist/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b51774b8d23c28d8fc44","import Path from \"svg-path-generator\";\n\nexport default class ConnectionRenderer {\n    render({el, x1, y1, x2, y2, connection}) {\n        const widthDifference = x2 - x1;\n\n        const path = Path()\n            .moveTo(x1, y1)\n            .relative().horizontalLineTo(widthDifference / 2)\n            .verticalLineTo(y2)\n            .horizontalLineTo(x2)\n            .end();\n\n        const classes = getClasses(connection);\n\n        el.innerHTML = `<svg class=\"connection ${classes.join(' ')}\">\n            <path d=\"${path}\"/>\n        </svg>`;\n    }\n\n    toTrainCase(str) {\n        return str.toLowerCase().replace(/ /g, '-');\n    }\n\n    getClasses(connection) {\n        return !connection?[]:[\n            'input-' + toTrainCase(connection.input.name),\n            'output-' + toTrainCase(connection.output.name),\n            'socket-input-' + toTrainCase(connection.input.socket.name),\n            'socket-output-' + toTrainCase(connection.output.socket.name)\n        ];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/connection-renderer.js","import ConnectionRenderer from './connection-renderer';\n\nexport default class Picker {\n    constructor(editor) {\n        this.el = document.createElement('div');\n        this.editor = editor;\n        this._output = null;\n    }\n\n    get output() {\n        return this._output;\n    }\n\n    set output(val) {\n        const { area } = this.editor.view;\n\n        this._output = val;\n\n        if (val !== null) {\n            area.appendChild(this.el);\n        } else if (this.el.parentElement) {\n            area.removeChild(this.el);\n            this.el.innerHTML = '';\n        }\n    }\n\n    renderConnection({ x, y }) {\n        if (!this.output) {\n            return;\n        }\n    \n        const node = this.editor.view.nodes.get(this.output.node);\n        const [x1, y1] = node.getSocketPosition(this.output);\n\n        ConnectionRenderer.render({ el: this.el, x1, y1, x2: x, y2: y, connection: null });\n    }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/picker.js","import Picker from \"./picker\";\n\nexport default class Plugin {\n    constructor(editor) {\n        this.editor = editor;\n        this.mousePosition = [0, 0];\n        this.picker = new Picker(editor);\n    }\n\n    pickOutput(output, node) {\n        if (output) {\n            this.picker.output = output;\n        }\n    }\n\n    pickInput(input, node) {\n        if (this.picker.output === null) {\n            if (input.hasConnection()) {\n                this.picker.output = input.connections[0].output;\n                this.editor.removeConnection(input.connections[0]);\n                this.picker.renderConnection(this.mousePosition);\n            }\n\n            return;\n        }\n\n        if (!input.multipleConnections && input.hasConnection()) {\n            this.editor.removeConnection(input.connections[0]);\n        }\n\n        if (!this.picker.output.multipleConnections && this.picker.output.hasConnection()) {\n            this.editor.removeConnection(this.picker.output.connections[0]);\n        }\n\n        if (this.picker.output.connectedTo(input)) {\n            let connection = input.connections.find(c => c.output === this.picker.output);\n\n            this.editor.removeConnection(connection);\n        }\n\n        this.editor.connect(this.picker.output, input);\n        this.picker.output = null\n    }\n\n    mouseHandle(e, input, output, socket) {\n        if (prevent) {\n            return;\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n\n        if (input) {\n            this.pickInput(input, socket);\n        } else if (output) {\n            this.pickOutput(output, socket);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugin.js","import Plugin from \"./plugin\";\n\nexport default function install(editor) {\n    const plugin = new Plugin(editor);\n\n    editor.on('rendersocket', ({ el, input, output, socket }) => {\n        var prevent = false;\n\n        el.addEventListener('mousedown', e => (plugin.mouseHandle(e, input, output, socket), prevent = true));\n        el.addEventListener('mouseup', e => plugin.mouseHandle(e, input, output, socket));\n        el.addEventListener('click', e => (plugin.mouseHandle(e, input, output, socket), prevent = false));\n        el.addEventListener('mousemove', () => (prevent = false));\n    });\n\n    editor.on('mousemove', arg => {\n        plugin.mousePosition = arg;\n        picker.renderConnection(arg);\n    });\n\n    editor.on('click', () => { plugin.picker.output = null; });\n\n    editor.on('renderconnection', arg => renderConnection(arg));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\nmodule.exports = require('./lib/svg-path-generator');\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/svg-path-generator/index.js\n// module id = 2\n// module chunks = 0","\n\nfunction SvgPathGenerator(path) {\n    if (!(this instanceof SvgPathGenerator)) {\n        return new SvgPathGenerator(path);\n    }\n\n    this.currentPath = (path || '') + ' ';\n    this.isRelative = false;\n}\n\n\nmodule.exports = SvgPathGenerator;\n\n\n\nSvgPathGenerator.prototype.toString = function() {\n    return this.end();\n};\n\n\nSvgPathGenerator.prototype.moveTo = function() {\n    this._appendData('M', arguments);\n    return this;\n};\n\n\nSvgPathGenerator.prototype.close = SvgPathGenerator.prototype.closePath = function() {\n    this._appendData('Z', []);\n    return this;\n};\n\nSvgPathGenerator.prototype.lineTo = function() {\n    this._appendData('L', arguments);\n    return this;\n};\n\nSvgPathGenerator.prototype.horizontalLineTo = function(x) {\n    this._appendData('H', [x]);\n    return this;\n};\n\nSvgPathGenerator.prototype.verticalLineTo = function(y) {\n    this._appendData('V', [y]);\n    return this;\n};\n\nSvgPathGenerator.prototype.curveTo = function() {\n    this._appendData('C', arguments);\n    return this;\n};\n\nSvgPathGenerator.prototype.smoothCurveTo = function() {\n    this._appendData('S', arguments);\n    return this;\n};\n\nSvgPathGenerator.prototype.bezierCurveTo = function() {\n    this._appendData('Q', arguments);\n    return this;\n};\n\nSvgPathGenerator.prototype.smoothBezierCurveTo = function() {\n    this._appendData('T', arguments);\n    return this;\n};\n\nSvgPathGenerator.prototype.ellipticalArc = function() {\n    this._appendData('A', arguments);\n    return this;\n};\n\n\nSvgPathGenerator.prototype.relative = function() {\n    this.isRelative = true;\n    return this;\n};\n\nSvgPathGenerator.prototype.end = function() {\n    return this.currentPath.trim();\n};\n\n\nSvgPathGenerator.prototype._appendData = function(symbol, args) {\n\n    args = Array.prototype.slice.call(args);\n\n    if(this.isRelative) {\n        symbol = symbol.toLowerCase();\n        this.isRelative = false;\n    }\n\n    this.currentPath += symbol + ' ' + args.join(' ') + ' ';\n};\n\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/svg-path-generator/lib/svg-path-generator.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}